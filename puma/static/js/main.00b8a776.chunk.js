(this.webpackJsonppuma=this.webpackJsonppuma||[]).push([[0],{153:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),l=a.n(o),i=(a(79),a(80),a(178)),c=a(180),u=a(182),s=a(66),d=Object(i.a)((function(e){return{root:{flexGrow:1},appbar:{backgroundColor:"rgb(37, 167, 167)"},title:{flexGrow:1,textAlign:"center",fontFamily:"'Fredericka the Great', cursive"}}}));function m(){var e=d();return r.a.createElement("div",{className:e.root},r.a.createElement(c.a,{position:"static",className:e.appbar},r.a.createElement(u.a,null,r.a.createElement(s.a,{variant:"h4",className:e.title},"TRIPPIN"))))}var p=a(25),f=a(188),g=a(189),v=a(187),y=a(185),b=a(186),E=a(184),h=a(183),w=a(63),k=a.n(w),j=Object(i.a)((function(e){return{button:{position:"fixed",bottom:"30px",right:"10px",zIndex:100,backgroundColor:"rgb(37, 167, 167)"}}}));function x(){var e=j(),t=r.a.useState(!0),a=Object(p.a)(t,2),n=a[0],o=a[1],l=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(h.a,{className:e.button,color:"primary","aria-label":"add",onClick:function(){o(!0)}},r.a.createElement(k.a,{fontSize:"large"})),r.a.createElement(g.a,{open:n,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(E.a,{id:"alert-dialog-title"},"Velkommen"),r.a.createElement(y.a,null,r.a.createElement(b.a,{id:"alert-dialog-description"},"L\xf8sning til at vise ruteoptimering f.eks. ved t\xf8mning af glascontainere.",r.a.createElement("ul",null,r.a.createElement("li",null,"Tryk p\xe5 mark\xf8r-ikonet oppe i venstre hj\xf8rne og tryk derefter et sted p\xe5 kortet for at lave en rute."),r.a.createElement("li",null,"Gentag ovenst\xe5ende for at udvide ruten")),"Ruten er sat til at starte og stoppe p\xe5 Njalsgade og bruger ",r.a.createElement("a",{href:"http://project-osrm.org/",target:"_blank"},"OSRM")," til at l\xf8se Travelling Salesman problemet med data fra Open Street Map.")),r.a.createElement(v.a,null,r.a.createElement(f.a,{onClick:l,color:"primary",autoFocus:!0},"Ok"))))}var S=a(41),O=a.n(S),C=a(64),N=a.n(C),M=(a(135),a(136),a(65)),F=a.n(M),L=function(e){return r.a.createElement("div",{className:"route-info"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,"L\xe6nge"),r.a.createElement("td",null,e.distance," km")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tid"),r.a.createElement("td",null,e.duration," min"))))},R={width:"100vw",height:"calc(100vh - 64px)",position:"absolute"},z=function(){var e=Object(n.useState)(null),t=Object(p.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(),i=Object(p.a)(l,2),c=i[0],u=i[1],s=Object(n.useRef)(null);Object(n.useEffect)((function(){O.a.accessToken="pk.eyJ1IjoiYmFmZmlvc28iLCJhIjoiY2s0eHNsbXRoMDQwODNtbzZydGtheWRzayJ9.HRBBcfhegW6-bvmCAfxtvg";a||function(e){var t=e.setMap,a=e.mapContainer,n=new O.a.Map({container:a.current,style:"mapbox://styles/mapbox/light-v10",center:[12.52489,55.68168],zoom:10});n.on("load",(function(){t(n),n.resize(),d(n)}))}({setMap:o,mapContainer:s})}),[a]);var d=function(e){var t=new N.a({displayControlsDefault:!1,controls:{point:!0,trash:!0}});e.addControl(t,"top-left");var a=function(){var a=t.getAll().features.map((function(e){return e.geometry.coordinates}));if(a.length>0){var n="http://165.22.200.0:5000/trip/v1/driving/12.578769,55.666729;".concat(a.join(";"),"?roundtrip=true&geometries=geojson&overview=full");F.a.get(n).then((function(t){var a=Math.round(t.data.trips[0].distance/1e3),n=Math.round(t.data.trips[0].duration/60);u({distance:a,duration:n});var r=t.data.trips[0].geometry,o=t.data.waypoints.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e.location},properties:{id:e.waypoint_index+1}}}));e.getSource("route")&&e.getSource("waypoints")&&(e.removeLayer("route"),e.removeSource("route"),e.removeLayer("waypoints"),e.removeSource("waypoints")),e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:r}}),e.addSource("waypoints",{type:"geojson",data:{type:"FeatureCollection",features:o}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgb(22,200,200)","line-width":4}}),e.addLayer({id:"waypoints",type:"symbol",source:"waypoints",layout:{"icon-image":"beer-15","text-field":["get","id"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,.6],"text-anchor":"top"}})}))}};e.on("draw.create",a),e.on("draw.update",a),e.on("draw.delete",a)};return r.a.createElement("div",{ref:function(e){return s.current=e},style:R},c?r.a.createElement(L,{distance:c.distance,duration:c.duration}):null)},I=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(x,null),r.a.createElement(z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,t,a){e.exports=a(153)},79:function(e,t,a){},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.00b8a776.chunk.js.map