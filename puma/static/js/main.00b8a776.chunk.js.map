{"version":3,"sources":["components/Navbar.js","components/Infobox.js","components/RouteInfo.js","components/Map.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","root","flexGrow","appbar","backgroundColor","title","textAlign","fontFamily","Navbar","classes","className","AppBar","position","Toolbar","Typography","variant","button","bottom","right","zIndex","AlertDialog","React","useState","open","setOpen","handleClose","Fab","color","aria-label","onClick","fontSize","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","href","target","DialogActions","Button","autoFocus","RouteInfo","props","distance","duration","styles","width","height","Map","map","setMap","routeInfo","setRouteInfo","mapContainer","useRef","useEffect","mapboxgl","accessToken","container","current","style","center","zoom","on","resize","addDrawControl","initializeMap","draw","MapboxDraw","displayControlsDefault","controls","point","trash","addControl","updatePoints","points","getAll","features","feat","geometry","coordinates","length","url","join","axios","get","then","res","Math","round","data","trips","linestring","waypoints","item","location","waypoint_index","getSource","removeLayer","removeSource","addSource","type","addLayer","ref","el","App","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.00b8a776.chunk.js","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1,\n    },\n    appbar: {\n        backgroundColor: 'rgb(37, 167, 167)',        \n    },\n    title: {\n        flexGrow: 1,\n        textAlign: 'center',\n        fontFamily: \"'Fredericka the Great', cursive\"\n    },\n}));\n\nexport default function Navbar() {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" className={classes.appbar}>\n                <Toolbar>\n                    <Typography variant=\"h4\" className={classes.title}>\n                        TRIPPIN\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n        </div>\n    );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Fab } from '@material-ui/core';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst useStyles = makeStyles(theme => ({\n    button: {\n        position: \"fixed\",\n        bottom: '30px',\n        right: '10px',\n        zIndex: 100,\n        backgroundColor: 'rgb(37, 167, 167)'\n    }\n}));\n\nexport default function AlertDialog() {\n    const classes = useStyles();\n\n    const [open, setOpen] = React.useState(true);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    return (\n        <div>\n            <Fab className={classes.button} color=\"primary\" aria-label=\"add\" onClick={handleClickOpen}>\n                <InfoIcon fontSize='large' />\n            </Fab>\n            <Dialog\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">{\"Velkommen\"}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        Løsning til at vise ruteoptimering f.eks. ved tømning af glascontainere.\n                        <ul>\n                            <li>Tryk på markør-ikonet oppe i venstre hjørne og tryk derefter et sted på kortet for at lave en rute.</li>\n                            <li>Gentag ovenstående for at udvide ruten</li>\n                        </ul>\n                        Ruten er sat til at starte og stoppe på Njalsgade og bruger <a href=\"http://project-osrm.org/\" target=\"_blank\">OSRM</a> til at løse Travelling Salesman problemet med data fra Open Street Map.\n          </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\" autoFocus>\n                        Ok\n          </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n}","import React from 'react'\n\nconst RouteInfo = (props) => {\n    return (\n        <div className='route-info'>\n            <table>\n                <tr>\n                    <td>Længe</td>\n                    <td>{props.distance} km</td>\n                </tr>\n                <tr>\n                    <td>Tid</td>\n                    <td>{props.duration} min</td>\n                </tr>\n            </table>\n        </div>\n    )\n}\n\nexport default RouteInfo\n","import React, { useEffect, useRef, useState } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxDraw from '@mapbox/mapbox-gl-draw'\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css\"\nimport axios from 'axios'\nimport RouteInfo from './RouteInfo';\n\n\nconst styles = {\n    width: \"100vw\",\n    height: \"calc(100vh - 64px)\",\n    position: \"absolute\"\n};\n\nconst Map = () => {\n    const [map, setMap] = useState(null);\n    // const [waypoints, setWaypoints] = useState([]);\n    const [routeInfo, setRouteInfo] = useState();\n    const mapContainer = useRef(null);\n\n    useEffect(() => {\n        mapboxgl.accessToken = \"pk.eyJ1IjoiYmFmZmlvc28iLCJhIjoiY2s0eHNsbXRoMDQwODNtbzZydGtheWRzayJ9.HRBBcfhegW6-bvmCAfxtvg\";\n        const initializeMap = ({ setMap, mapContainer }) => {\n            const map = new mapboxgl.Map({\n                container: mapContainer.current,\n                style: \"mapbox://styles/mapbox/light-v10\", // stylesheet location\n                center: [12.52489, 55.68168],\n                zoom: 10\n            });\n\n            map.on(\"load\", () => {\n                setMap(map);\n                map.resize();\n\n                addDrawControl(map)\n            });\n        };\n\n        if (!map) initializeMap({ setMap, mapContainer });\n    }, [map]);\n\n    const addDrawControl = (map) => {\n        let draw = new MapboxDraw({\n            displayControlsDefault: false,\n            controls: {\n                point: true,\n                trash: true\n            }\n        });\n        map.addControl(draw, 'top-left');\n\n        // Get drawn features and add to state\n        const updatePoints = () => {\n            let geom = draw.getAll();\n            let points = geom.features.map(feat => feat.geometry.coordinates)\n\n            if (points.length > 0) {\n                let url = `http://165.22.200.0:5000/trip/v1/driving/12.578769,55.666729;${points.join(';')}?roundtrip=true&geometries=geojson&overview=full`\n                axios.get(url).then(res => {\n                    let distance = Math.round(res.data.trips[0].distance/1000)\n                    let duration = Math.round(res.data.trips[0].duration/60)\n                    setRouteInfo({\"distance\": distance, \"duration\": duration})\n                    let linestring = res.data.trips[0].geometry\n                    let waypoints = res.data.waypoints.map((item) => {\n                        let feature = {\n                            'type': 'Feature',\n                            'geometry': {\n                                'type': 'Point',\n                                'coordinates': item.location\n                            },\n                            'properties': {\n                                'id': item.waypoint_index + 1\n                            }\n                        }\n\n                        return feature\n                    })\n\n                    // Remove current overlay\n                    if (map.getSource('route') && map.getSource('waypoints')) {\n                        map.removeLayer('route')\n                        map.removeSource('route')\n                        map.removeLayer('waypoints')\n                        map.removeSource('waypoints')\n                    }\n\n                    map.addSource(\"route\", {\n                        \"type\": \"geojson\",\n                        \"data\": {\n                            'type': 'Feature',\n                            'properties': {},\n                            'geometry': linestring\n                        }\n                    });\n\n                    map.addSource(\"waypoints\", {\n                        \"type\": \"geojson\",\n                        \"data\": { type: \"FeatureCollection\", features: waypoints }\n                    });\n\n                    map.addLayer({\n                        'id': 'route',\n                        'type': 'line',\n                        'source': 'route',\n                        'layout': {\n                            'line-join': 'round',\n                            'line-cap': 'round'\n                        },\n                        'paint': {\n                            'line-color': 'rgb(22,200,200)',\n                            'line-width': 4\n                        }\n                    })\n\n                    map.addLayer({\n                        'id': 'waypoints',\n                        'type': 'symbol',\n                        'source': 'waypoints',\n                        'layout': {\n                            // get the icon name from the source's \"icon\" property\n                            // concatenate the name to get an icon from the style's sprite sheet\n                            'icon-image': 'beer-15',\n                            // get the title name from the source's \"title\" property\n                            'text-field': ['get', 'id'],\n                            'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n                            'text-offset': [0, 0.6],\n                            'text-anchor': 'top'\n                        }\n                    })\n                })\n            }\n        }\n\n        // Store drawn poygon in state\n        map.on('draw.create', updatePoints);\n        map.on('draw.update', updatePoints);\n        map.on('draw.delete', updatePoints);\n    }\n\n    // const getTrip = waypoints => {\n    //     let url = `http://165.22.200.0:5000/route/v1/trip/${waypoints}?steps=false&geometries=geojson&overview=full&annotations=false`\n    //     return axios.get(url).then(req => setRoute(req.data.routes[0].geometry))\n    // }\n\n\n    return (\n        <div ref={el => (mapContainer.current = el)} style={styles} >\n            {routeInfo ? <RouteInfo distance={routeInfo.distance} duration={routeInfo.duration} /> : null}\n        </div>\n    );\n};\n\nexport default Map;","import React from 'react';\nimport './App.css';\n\nimport Navbar from './components/Navbar'\nimport Infobox from './components/Infobox'\nimport Map from './components/Map'\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <Navbar />\n      <Infobox />\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}